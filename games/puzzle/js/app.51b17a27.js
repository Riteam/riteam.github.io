(function(e){function t(t){for(var r,u,l=t[0],o=t[1],i=t[2],f=0,d=[];f<l.length;f++)u=l[f],Object.prototype.hasOwnProperty.call(c,u)&&c[u]&&d.push(c[u][0]),c[u]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,i||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,l=1;l<n.length;l++){var o=n[l];0!==c[o]&&(r=!1)}r&&(a.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},c={app:0},a=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/games/puzzle/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=o;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04bd":function(e,t,n){},3178:function(e,t,n){},"3ba2":function(e,t,n){"use strict";n("04bd")},"3bd1":function(e,t,n){},5284:function(e,t,n){"use strict";n("f827")},"52a8":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={class:"content_wrap"};function a(e,t,n,a,u,l){var o=Object(r["m"])("PuzzleGame");return Object(r["i"])(),Object(r["d"])("div",c,[Object(r["f"])(o)])}var u={class:"board_wrap"};function l(e,t,n,c,a,l){var o=Object(r["m"])("PuzzleHeader"),i=Object(r["m"])("PuzzleBoard"),s=Object(r["m"])("PuzzleFooter");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["f"])(o,c.stat,null,16),Object(r["f"])("div",u,[Object(r["f"])(i,{ref:"board",puzzle:c.puzzle,onWrong:t[1]||(t[1]=function(e){return c.stat.wrong++}),onResolve:c.resolveHandler},null,8,["puzzle","onResolve"]),Object(r["f"])(s)])],64)}n("99af");var o={class:"board"},i={key:1,class:"grid_wrap"},s=Object(r["f"])("div",{class:"grid_default grid_empty"},null,-1);function f(e,t,n,c,a,u){var l=Object(r["m"])("PuzzleGrid"),f=Object(r["m"])("PuzzleCharsPanel");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["f"])("div",o,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["l"])(e.matrix,(function(e,t){return Object(r["i"])(),Object(r["d"])(r["a"],{key:t},[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["l"])(e,(function(e){return Object(r["i"])(),Object(r["d"])(r["a"],{key:e.id},[e?(Object(r["i"])(),Object(r["d"])(l,{key:0,data:e,onClick:function(t){return c.clickHandler(e)}},null,8,["data","onClick"])):(Object(r["i"])(),Object(r["d"])("div",i,[s]))],64)})),128))],64)})),128))]),Object(r["f"])(f,{chars:e.chars,used:e.charUsed,onCharClick:c.charClickHandler},null,8,["chars","used","onCharClick"])],64)}n("4de4"),n("7db0"),n("b64b"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0");var d=n("5530"),b=n("2909");n("7c98");function p(e,t,n,c,a,u){return Object(r["i"])(),Object(r["d"])("div",{class:["grid_wrap",{shake:c.doShake,wave:c.doWave}],onAnimationEnd:t[1]||(t[1]=function(){return c.removeAni&&c.removeAni.apply(c,arguments)})},[Object(r["f"])("div",{class:["grid grid_default",c.getStyle()]},Object(r["n"])(c.showChar),3)],34)}var h={props:{data:Object},setup:function(e){console.log("é‡æ–°åˆ›å»º");var t=Object(r["b"])((function(){return e.data})),n=Object(r["b"])((function(){return t.value.type%4===0?t.value.char:t.value.filledChar}));function c(){var e={pending:1===t.value.type,selected:t.value.selected,rejected:3===t.value.type,resolved:4===t.value.type};return e}function a(){return 3===t.value.type?"shake":""}Object(r["h"])((function(){console.log(t.value.char,"æ›´æ–°äº†")}));var u=Object(r["k"])(!1),l=Object(r["k"])(!1);function o(){u.value=!1,l.value=!1}return Object(r["p"])((function(){return t.value.type}),(function(e){3===e&&(u.value=!0)})),Object(r["p"])((function(){return t.value.delay}),(function(e,t){0===t&&setTimeout((function(){l.value=!0}),e)})),{showChar:n,getStyle:c,getWrapperStyle:a,doShake:u,doWave:l,removeAni:o}}};n("afc1"),n("dd0e");h.render=p;var j=h,v={class:"charsPanel"};function O(e,t,n,c,a,u){return Object(r["i"])(),Object(r["d"])("div",v,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["l"])(n.chars,(function(e){return Object(r["i"])(),Object(r["d"])("div",{class:["charAns",{used:e in n.used}],key:e,onClick:function(t){return c.clickHandler(e)}},Object(r["n"])(e),11,["onClick"])})),128))])}var m={name:"PuzzleCharsPanel",props:["chars","used"],setup:function(e,t){Object(r["j"])(e.used);function n(e){t.emit("charClick",e)}var c=Object(r["j"])(e.chars);return console.log(c),{clickHandler:n}}};n("7d4c");m.render=O;var z=m;function g(e){for(var t=[],n=0;n<e.length;n++){t.push(e[n]);var r=Math.random()*t.length|0;t[n]=t[r],t[r]=e[n]}return t}var y=0;function w(e){for(var t=e.matrix,n=e.chars,r=new Set(n),c=[],a=0,u=0;u<t.length;u++){var l=t[u];c[u]=Object(b["a"])(l);for(var o=0;o<l.length;o++){var i=l[o];if(i){var s={id:y++,char:i,filledChar:"",type:r.has(i)?1:0,selected:!1,index:9*u+o,delay:0};a||1!==s.type||(a=s.index,s.selected=!0),c[u][o]=s}}}return Object(d["a"])(Object(d["a"])({},e),{},{matrix:c,chars:g(n),firstEmptyIndex:a})}function x(e,t){var n=e.length;if(!(t<0||t/n>=n))return e[t/n|0][t%n]}function k(e,t){var n=e.length,r=[],c=[],a=t/n|0,u=t%n,l=a,o=u;while(o>0&&e[a][o-1])o--;do{r.push(e[a][o++])}while(o<n&&e[a][o]);while(l>0&&e[l-1][u])l--;do{c.push(e[l++][u])}while(l<n&&e[l][u]);return{row:r,col:c}}function C(e,t){var n=x(e,t);if(3===n.type)return n;for(var r=e.length,c=[-r,r,-1,1],a=[],u=null,l=1;l<=3;l++)for(var o=0;o<c.length;o++)if(0!==c[o]){var i=x(e,t+l*c[o]);i?a.push(i):c[o]=0}return(u=a.find((function(e){return 3===e.type})))||(u=a.find((function(e){return 1===e.type&&""===e.filledChar})))?u:P(e,t)}function P(e,t){console.log("å¼€å¯BFS");var n=e.length,r=0,c=void 0,a=[t],u=new Set;while(a.length){r++;var l=a.shift();u.add(l);var o=x(e,l);if(o.type%4!==0){c=o;break}var i=0,s=Math.floor(l/n)*n,f=Math.ceil(l/n)*n-1;i=l-n,!u.has(i)&&x(e,i)&&a.push(i),i=l+n,!u.has(i)&&x(e,i)&&a.push(i),i=l-1,i>=s&&!u.has(i)&&x(e,i)&&a.push(i),i=l+1,i<=f&&!u.has(i)&&x(e,i)&&a.push(i)}return console.log("bfsæ¬¡æ•°ï¼š"+r),c}var _={name:"PuzzleBoard",components:{PuzzleGrid:j,PuzzleCharsPanel:z},emits:["wrong","resolve"],props:["puzzle"],setup:function(e,t){var n=0,c=null,a=Object(r["j"])({matrix:[],chars:[],charUsed:{}});function u(e){c=w(e),a.matrix=c.matrix,a.chars=c.chars,a.charUsed={},n=c.firstEmptyIndex}function l(e){if(!e)return!1;x(a.matrix,n).selected=!1,e.selected=!0,n=e.index}function o(e){e.type%4!==0&&(e.type<4&&e.filledChar&&s(e.filledChar),l(e))}function i(e){var t=x(a.matrix,n);t.filledChar&&s(t.filledChar),a.charUsed[e]=t,t.filledChar=e,p(n)}function s(e){var t=a.charUsed[e];t.filledChar="",delete a.charUsed[e];var n=k(a.matrix,t.index),r=n.row,c=n.col;[].concat(Object(b["a"])(r),Object(b["a"])(c)).forEach((function(e){3===e.type&&(e.type=1)}))}function f(e){a.charUsed[e]||i(e)}function p(e){var n=k(a.matrix,e),r=n.row,c=n.col,u=!0;function l(e){if(e.length<4)return!1;if(e.some((function(e){return e.type%4!==0&&0===e.filledChar.length})))return!1;var n=e.filter((function(e){return e.type>0&&e.type<4}));if(n.some((function(e){return e.filledChar!==e.char})))n.forEach((function(e){e.type=3})),u&&(t.emit("wrong"),u=!1);else for(var r=function(t){e[t].type=4,e[t].selected=!1,e[t].delay=0,setTimeout((function(){e[t].delay=50*(t+1)}),0)},c=0;c<e.length;c++)r(c)}l(r),l(c),h(e)}function h(e){var n=C(a.matrix,e);n?l(n):(console.log("æ— ä¸‹ä¸€ç©ºæ ¼"),Object.keys(a.charUsed).length===a.chars.length&&setTimeout((function(){t.emit("resolve")}),1e3))}return u(e.puzzle),Object(r["p"])((function(){return e.puzzle}),(function(e){u(e)})),Object(d["a"])(Object(d["a"])({},Object(r["o"])(a)),{},{clickHandler:o,charClickHandler:f})}};n("b499");_.render=f;var S=_,M={class:"header"},H={class:"content"},R={class:"sub_box residue"},U=Object(r["f"])("h5",null,"å½“å‰å…³å¡",-1),A={class:"text"},E={class:"sub_box time"},G=Object(r["f"])("h5",null,"å·²ç”¨æ—¶",-1),T={class:"sub_box wrong"},B=Object(r["f"])("h5",null,"é”™è¯¯è®¡æ•°",-1),I={key:0},W={key:1},F=Object(r["f"])("small",null,"ðŸ”¥",-1);function J(e,t,n,c,a,u){return Object(r["i"])(),Object(r["d"])("div",M,[Object(r["f"])("div",H,[Object(r["f"])("div",R,[U,Object(r["f"])("span",A,Object(r["n"])(n.puzzleResidue)+"/"+Object(r["n"])(n.puzzleCount),1)]),Object(r["f"])("div",E,[G,Object(r["f"])("span",null,Object(r["n"])(n.time)+"s",1)]),Object(r["f"])("div",T,[B,n.wrong<=n.wrongMax?(Object(r["i"])(),Object(r["d"])("span",I,Object(r["n"])(n.wrong)+"/"+Object(r["n"])(n.wrongMax),1)):(Object(r["i"])(),Object(r["d"])("span",W,[Object(r["e"])(Object(r["n"])(n.wrong)+"/",1),F]))])])])}var D={props:["time","wrong","wrongMax","puzzleResidue","puzzleCount"],setup:function(){}};n("3ba2");D.render=J;var V=D,q={class:"footer"},K=Object(r["f"])("div",{class:"footer_title"},"ABOUT",-1),L=Object(r["f"])("div",{class:"footer_box"},[Object(r["f"])("p",null,"ä½œè€…ï¼šJrc"),Object(r["f"])("p",null,[Object(r["e"])(" Githubï¼š"),Object(r["f"])("a",{href:"https://github.com/Riteam/puzzle",target:"_blank"},"github.com/Riteam/puzzle")]),Object(r["f"])("p",null,"åŸºäºŽå®žé™…é¡¹ç›®å¼€å‘ã€‚Vue3ç»ƒä¹ DEMOã€‚")],-1);function N(e,t,n,c,a,u){return Object(r["i"])(),Object(r["d"])("div",q,[K,L])}var Q={};n("988d");Q.render=N;var X=Q,Y={matrix:[["","","","","","","","",""],["","","ä¸","ä¸€","è€Œ","è¶³","","",""],["","","è´Ÿ","","","æ™º","","",""],["","","ä¼—","","","å¤š","","é—",""],["å–œ","å‡º","æœ›","å¤–","","è°‹","è´¢","å®³","å‘½"],["","äºº","","","æ˜¥","","","æ— ",""],["","å¤´","","","å›ž","å‘³","æ— ","ç©·",""],["","åœ°","","","å¤§","","","",""],["","","","","åœ°","","","",""]],chars:["å‡º","æœ›","å¤´","ä¸","è¶³","è°‹","å®³","ç©·","å›ž","å¤§"]},Z={matrix:[["","","","","","","","",""],["","","åŽš","ç§¯","è–„","å‘","","","å…ˆ"],["","","","åœŸ","","è´¢","","","ç¤¼"],["","","","æˆ","","è‡´","","","åŽ"],["é‡","äºŽ","æ³°","å±±","","å¯Œ","å›½","å¼º","å…µ"],["","","ç„¶","","","","","è¯",""],["","","å¤„","","","","","å¤º",""],["","","ä¹‹","","è›®","æ¨ª","æ— ","ç†",""],["","","","","","","","",""]],answers:{"åŽšç§¯è–„å‘":!0,"ç§¯åœŸæˆå±±":!0,"å‘è´¢è‡´å¯Œ":!0,"å…ˆç¤¼åŽå…µ":!0,"å¼ºè¯å¤ºç†":!0,"è›®æ¨ªæ— ç†":!0,"é‡äºŽæ³°å±±":!0,"æ³°ç„¶å¤„ä¹‹":!0,"å¯Œå›½å¼ºå…µ":!0},chars:["åŽš","ç„¶","å…µ","å¤º","æˆ","è–„","ç†","å¯Œ","æ³°","è‡´","ç¤¼","æ¨ª","å±±"]},$={matrix:[["","","","","","","","ä½Ž",""],["","","æ— ","","éƒŽ","","","åŸ",""],["","","åœ°","","æ‰","ç–","å­¦","æµ…",""],["","","è‡ª","","å¥³","","","å”±",""],["","èŠ±","å®¹","æœˆ","è²Œ","","","",""],["","è¨€","","æ˜Ž","","","å°º","",""],["","å·§","","æ˜Ÿ","ç½—","æ£‹","å¸ƒ","",""],["","è¯­","","ç¨€","","","æ–—","",""],["","","","","","","ç²Ÿ","",""]],chars:["èŠ±","å®¹","æœˆ","è²Œ","æ˜Ÿ","æ— ","æ‰","å¸ƒ","æµ…","åŸ","ç¨€","ç½—","å·§","æ–—"]},ee=[Y,Z,$],te={name:"PuzzleGame",components:{PuzzleBoard:S,PuzzleHeader:V,PuzzleFooter:X},setup:function(){var e=Object(r["k"])(ee[0]),t=Object(r["j"])({wrong:0,wrongMax:3,time:0,puzzleResidue:1,puzzleCount:ee.length}),n=setInterval((function(){t.time++}),1e3);function c(){3===t.puzzleResidue?(alert("æ­å–œè¿‡å…³\nç”¨æ—¶ ".concat(t.time," ç§’\né”™è¯¯ ").concat(t.wrong," æ¬¡")),clearInterval(n)):(e.value=ee[t.puzzleResidue],t.puzzleResidue++)}return Object(r["g"])((function(){clearInterval(n),console.log("game unmount")})),{puzzle:e,stat:t,resolveHandler:c}}};n("5284");te.render=l;var ne=te,re={name:"App",components:{PuzzleGame:ne}};n("ef6b");re.render=a;var ce=re;Object(r["c"])(ce).mount("#app")},"7d4c":function(e,t,n){"use strict";n("883e")},"883e":function(e,t,n){},"988d":function(e,t,n){"use strict";n("9923")},9923:function(e,t,n){},afc1:function(e,t,n){"use strict";n("3178")},b499:function(e,t,n){"use strict";n("e714")},dd0e:function(e,t,n){"use strict";n("3bd1")},e714:function(e,t,n){},ef6b:function(e,t,n){"use strict";n("52a8")},f827:function(e,t,n){}});
//# sourceMappingURL=app.51b17a27.js.map